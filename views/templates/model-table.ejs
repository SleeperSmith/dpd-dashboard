<thead class="type-icons">
  <tr>
    <th class="code"><i class="icon-hack string" title="string"></i> _id</th>
    <% if (resourceType == "UserCollection") { %>
      <th class="code"><i class="icon-hack string" title="string"></i> email</th>
      <th class="code"><i class="icon-hack string" title="string"></i> password</th>
    <% } %>
    <% _.each(properties, function(property) { %>
      <th class="code"><i class="icon-hack <%- property.type %>" title=" <%- property.typeLabel %>"></i> <%- property.name %></th>
    <% }); %>
    <th></th>
  </tr>
</thead>
<tbody>
  <% collectionModel.each(function(rowModel) { if (!rowModel.get('c_delete')) { %>
    <% var row = rowModel.toJSON(); %>
    <tr data-cid="<%= rowModel.cid %>">
      <td class='id'>
        <%- row._id || '...' %>
      </td>
      <% if (resourceType == "UserCollection") { %>
        <td data-prop="email">
          <% if (row.c_errors && row.c_errors.email) { %>
            <a class="error-tooltip" rel="tooltip" title="<%- row.c_errors.email %>">
              <i class="icon-warning-sign"></i>
            </a>
          <% } %>
          <% if (row.c_active) { %>
            <input type="text" name="email" value="<%- row.email || '' %>" />
          <% } else { %>
            <%- row.email || '...' %>
          <% } %>
        </td>
        <td data-prop="password">
          <% if (row.c_errors && row.c_errors.password) { %>
            <a class="error-tooltip" rel="tooltip" title="<%- row.c_errors.password %>">
              <i class="icon-warning-sign"></i>
            </a>
          <% } %>
          <% if (row.c_active) { %>
            <input type="password" name="password" placeholder="*******" />
          <% } else { %>
            ...
          <% } %>
        </td>
      <% } %>
      <% _.each(properties, function(property) { %>
        <% var val = row[property.name]; %>
        <% if (typeof val === 'undefined') { val = row[property.$renameFrom]; } %>
        <td data-prop="<%- property.name %>">
          <% if (row.c_errors && row.c_errors[property.name]) { %>
            <a class="error-tooltip" rel="tooltip" title="<%- row.c_errors[property.name] %>">
              <i class="icon-warning-sign"></i>
            </a>
          <% }
            if (row.c_active) { %>
            <% if (typeof val === 'undefined') { val = '' } %>
            <% if (property.type == 'number') { %>
              <input type="number" name="<%- property.name %>" value="<%- val %>" />
            <% } else if (property.type == 'boolean') { %>
              <input type="checkbox" name="<%- property.name %>" <% val ? 'checked="checked"' : ''%> />
            <% } else if (property.type == 'date') {  %>
              <input type="datetime" name="<%- property.name %>" value="<%- val %>" />
            <% } else { %>
              <input type="text" name="<%- property.name %>" value="<%- val %>" />
            <% } %>
          <% } else { %>
            <% if (typeof val === 'undefined') { val = '...' } %>
            <%- val %>
          <% } %>
        </td>
      <% }); %>
      <td>
        <% if (row.c_active) { %>
          <a href="#" class="done-btn btn btn-primary"><i class="icon-ok-sign icon-white"></i> save</a>
          <a href="#" class="cancel-btn btn">cancel</a>
        <% } else { %>
          <a href="#" class="edit-btn btn"><i class="icon-edit"></i> edit</a>
          <a href="#" class="delete-btn btn"><i class="icon-remove-sign"></i> delete</a>
        <% } %>
        
      </td>
    </tr>
  <% }}); %>
</tbody>
<tfoot>
  <tr>
    <td colspan="<%= properties.length + (resourceType == "UserCollection" ? 4 : 2) %>">
      <% if (!collectionModel.length) { %> 
        <div class="alert alert-info">This collection is empty. Add an object to start storing data.</div>
      <% } %>
      <button class="btn btn-success add-btn"><i class="icon-white icon-plus"></i> add</a>
    </td>
  </tr>
</tfoot>